<UserControl x:Class="ISDP2025_Parfonov_Zerrou.Forms.ForemanUserControls.EditItemsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ISDP2025_Parfonov_Zerrou.Forms.ForemanUserControls"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="900"
             Unloaded="UserControl_Unloaded">

    <UserControl.Resources>
        <Style x:Key="RoundedButton" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="5" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
                                               To="1.1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
                                               To="1.1" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
                                               To="1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
                                               To="1" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid Background="White" Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Edit Inventory Thresholds" 
                  FontSize="24" 
                  FontWeight="Bold" 
                  Margin="0,0,0,20"
                  Grid.Row="0"/>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
            <Label Content="Location:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <ComboBox x:Name="cmbLocation" Width="200" Margin="0,0,10,0"
                      SelectionChanged="CmbLocation_SelectionChanged" 
                      Cursor="Hand"
                      DisplayMemberPath="SiteName"
                      SelectedValuePath="SiteId"/>

            <Label Content="Search:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <TextBox x:Name="txtSearch" Width="200" Margin="0,0,10,0" 
                     TextChanged="TxtSearch_TextChanged" Cursor="Pen"/>

            <Label Content="Category:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <ComboBox x:Name="cmbSearchCategory" Width="150" Margin="0,0,10,0"
                      SelectionChanged="CmbSearchCategory_SelectionChanged" Cursor="Hand"/>
        </StackPanel>

        <GroupBox Grid.Row="2" Header="Item Details" Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Label Content="Item ID:" Grid.Row="0" Grid.Column="0"/>
                <Label x:Name="lblItemId" Grid.Row="0" Grid.Column="1" FontWeight="Bold"/>

                <Label Content="Item Name:" Grid.Row="1" Grid.Column="0"/>
                <TextBox x:Name="txtItemName" Grid.Row="1" Grid.Column="1" 
                         IsReadOnly="True" Margin="0,2"/>

                <Label Content="Current Quantity:" Grid.Row="2" Grid.Column="0"/>
                <TextBox x:Name="txtCurrentQuantity" Grid.Row="2" Grid.Column="1" 
                         IsReadOnly="True" Margin="0,2"/>

                <Label Content="Reorder Threshold:" Grid.Row="1" Grid.Column="2"/>
                <hc:NumericUpDown x:Name="nudReorderThreshold" Grid.Row="1" Grid.Column="3" 
                                 Minimum="0" Maximum="999" Margin="0,2"/>

                <Label Content="Optimum Threshold:" Grid.Row="2" Grid.Column="2"/>
                <hc:NumericUpDown x:Name="nudOptimumThreshold" Grid.Row="2" Grid.Column="3"
                                 Minimum="0" Maximum="999" Margin="0,2"/>

                <Label Content="Notes:" Grid.Row="3" Grid.Column="0"/>
                <TextBox x:Name="txtNotes" Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3"
                         TextWrapping="Wrap" AcceptsReturn="True" Height="60" Margin="0,2"/>
            </Grid>
        </GroupBox>

        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,10">
                <Button x:Name="btnRefresh" Content="Refresh" Width="100" Height="30"
                        Margin="0,0,10,0"
                        Click="BtnRefresh_Click"
                        Style="{StaticResource RoundedButton}"
                        Background="#2196F3"
                        Foreground="White" Cursor="Hand"/>

                <Button x:Name="btnSave" Content="Save Changes" Width="100" Height="30"
                        Click="BtnSave_Click"
                        Style="{StaticResource RoundedButton}"
                        Background="#4CAF50"
                        Foreground="White" Cursor="Hand"/>
            </StackPanel>

            <DataGrid x:Name="dgvInventory" Grid.Row="1"
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      SelectionMode="Single" 
                      SelectionChanged="DgvInventory_SelectionChanged"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      AlternatingRowBackground="#F5F5F5"
                      GridLinesVisibility="All"
                      BorderBrush="#DDDDDD"
                      BorderThickness="1"
                      RowHeaderWidth="0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding ItemId}" Width="50">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Item Name" Binding="{Binding Name}" Width="200">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="TextWrapping" Value="Wrap"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Location" Binding="{Binding SiteName}" Width="150">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Current Quantity" Binding="{Binding Quantity}" Width="100">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="TextAlignment" Value="Right"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Reorder Threshold" Binding="{Binding ReorderThreshold}" Width="120">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="TextAlignment" Value="Right"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Optimum Threshold" Binding="{Binding OptimumThreshold}" Width="120">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="TextAlignment" Value="Right"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="TextWrapping" Value="Wrap"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</UserControl>